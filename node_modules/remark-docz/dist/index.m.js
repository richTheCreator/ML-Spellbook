import visit from"unist-util-visit";import remove from"unist-util-remove";const componentName=e=>{const t=e.match(/^\<\\?(\w+)/);return t&&t[1]},valuesFromNodes=e=>(t,n)=>{const o=[];if(t!==n)for(let r=n;r>=t;r--){const n=e.children[r];n.children&&n.children.length>0&&o.push(...n.children.map(e=>e.value)),n.value&&n.value.length>0&&o.push(n.value),r!==t&&remove(e,n)}return o},mergeNodeWithoutCloseTag=(e,t,n)=>{if(!t.value||"string"!=typeof t.value)return;const o=componentName(t.value),r=RegExp(`^\\<${o}`),i=RegExp(`\\<\\/${o}\\>$`),l=e=>r.test(e),u=e=>i.test(e),s=e=>e&&!l(e)&&u(e);if(!o||l(t.value)&&u(t.value))return;const a=e.children.findIndex(({value:e,children:t})=>t?t.some(e=>s(e.value)):s(e));if(a>-1&&a!==n){const o=valuesFromNodes(e)(n,a);t.value=o.reverse().join("\n")}};var index=()=>e=>{visit(e,"html",function(t,n){mergeNodeWithoutCloseTag(e,t,n)})};export default index;
